<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <title>860 Sports — Odds Públicas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    :root{--bg:#0f0f0f;--panel:#131313;--panel2:#171717;--border:#2a2a2a;--text:#f5f5f5;--muted:#b3b3b3;--accent:#d71920;}
    *{box-sizing:border-box}
    body{font-family:Arial,Helvetica,sans-serif;margin:0;background:var(--bg);color:var(--text)}
    header{padding:12px 16px;background:var(--panel2);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{font-weight:700}
    a{color:#9bd;text-decoration:none}
    .wrap{padding:14px; max-width:1100px; margin:0 auto}
    table{width:100%;border-collapse:collapse;background:var(--panel)}
    th,td{border:1px solid var(--border);padding:8px;text-align:center}
    thead{background:var(--accent);color:#fff}
  </style>
</head>
<body>
<header>
  <b class="brand">860 Sports — Odds Públicas</b>
  <nav><a href="admin.html">Administrador</a></nav>
</header>
<div class="wrap">
  <table>
    <thead><tr><th>Código</th><th>Deporte</th><th>Equipo</th><th>ML</th><th>Over</th><th>Under</th><th>Total</th></tr></thead>
    <tbody id="tbody"><tr><td colspan="7">Cargando…</td></tr></tbody>
  </table>
</div>
<script>
(async function(){
  try{
    const r = await fetch('/api/odds/public');
    const data = await r.json();
    const tb = document.getElementById('tbody'); tb.innerHTML='';
    (data.codebook||[]).forEach(x=>{
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${x.code}</td><td>${x.sport}</td><td>${x.team}</td><td>${fmt(x.ml)}</td><td>${fmt(x.over)}</td><td>${fmt(x.under)}</td><td>${x.points ?? '—'}</td>`;
      tb.appendChild(tr);
    });
    function fmt(p){ return (p||p===0) ? (p>0?('+'+p):p) : '—'; }
  }catch(e){
    document.getElementById('tbody').innerHTML = `<tr><td colspan="7">Error: ${e?.message||e}</td></tr>`;
  }
})();
</script>
</body>
</html>
